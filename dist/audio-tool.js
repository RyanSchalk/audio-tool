"use strict";function _typeof(a){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}function _possibleConstructorReturn(a,b){return b&&("object"===_typeof(b)||"function"==typeof b)?b:_assertThisInitialized(a)}function _assertThisInitialized(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&_setPrototypeOf(a,b)}function _wrapNativeSuper(a){var b="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function(a){function c(){return _construct(a,arguments,_getPrototypeOf(this).constructor)}if(null===a||!_isNativeFunction(a))return a;if("function"!=typeof a)throw new TypeError("Super expression must either be null or a function");if("undefined"!=typeof b){if(b.has(a))return b.get(a);b.set(a,c)}return c.prototype=Object.create(a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(c,a)},_wrapNativeSuper(a)}function isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(a){return!1}}function _construct(){return _construct=isNativeReflectConstruct()?Reflect.construct:function(b,c,d){var e=[null];e.push.apply(e,c);var a=Function.bind.apply(b,e),f=new a;return d&&_setPrototypeOf(f,d.prototype),f},_construct.apply(null,arguments)}function _isNativeFunction(a){return-1!==Function.toString.call(a).indexOf("[native code]")}function _setPrototypeOf(a,b){return _setPrototypeOf=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},_setPrototypeOf(a,b)}function _getPrototypeOf(a){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},_getPrototypeOf(a)}/**
 * audio-tool custom web component
 * Create by Kevin Logan
 */var audioTool=/*#__PURE__*/function(a){function b(){return _classCallCheck(this,b),_possibleConstructorReturn(this,_getPrototypeOf(b).call(this))}return _inherits(b,a),_createClass(b,[{key:"connectedCallback",value:function connectedCallback(){this.addStyles(),this.generateAudioElement(),this.extractAttributesForAudioElement(),this.generateSections(),this.generatePlayPauseButton(),this.generateTitle(),this.generateProgressBar(),this.generateTimeStamp(),this.generateRestartButton(),this.setTime()}},{key:"disconnectedCallback",value:function disconnectedCallback(){}},{key:"addStyles",value:function addStyles(){if(!this.hasAttribute("styles")||"false"!==this.getAttribute("styles")){this.styles=document.createElement("style"),this.styles.type="text/css";this.styles.styleSheet?this.styles.styleSheet.cssText="audio-tool{position:relative;display:block;margin:8px;padding:8px;box-shadow:1px 2px 5px rgba(0,0,0,0.31);-webkit-box-shadow:1px 2px 5px rgba(0,0,0,0.31);-moz-box-shadow:1px 2px 5px rgba(0,0,0,0.31);border:solid 1px #cbc9c9;border-radius:8px/7px;display:grid;justify-items:center;align-items:center;grid-template-columns:15% 70% 15%;max-width:500px;width:80%;height:175px}audio-tool *{position:relative;display:block;margin:8px;padding:8px}audio-tool button{border-radius:50%;border:1px solid #000;cursor:pointer;width:45px;height:45px}audio-tool button:focus,audio-tool button:active{-webkit-box-shadow:inset 0px 0px 10px #c1c1c1;-moz-box-shadow:inset 0px 0px 10px #c1c1c1;box-shadow:inset 0px 0px 10px #c1c1c1;outline:none}audio-tool progress{cursor:pointer;display:block;width:auto;height:50px}audio-tool label{display:block;font-size:1em}audio-tool h1{font-size:1.5em}audio-tool style{display:none}audio-tool .play{background:url(../icons/play.png);background-repeat:no-repeat;background-position:center center}audio-tool .pause{background:url(../icons/pause.png);background-repeat:no-repeat;background-position:center center}audio-tool .restart{background:url(../icons/restart.png);background-repeat:no-repeat;background-position:center center}audio-tool .left-section{order:1;height:auto;width:auto}audio-tool .middle-section{order:2;height:auto;width:90%}audio-tool .right-section{order:3;height:auto;width:auto}":this.styles.appendChild(document.createTextNode("audio-tool{position:relative;display:block;margin:8px;padding:8px;box-shadow:1px 2px 5px rgba(0,0,0,0.31);-webkit-box-shadow:1px 2px 5px rgba(0,0,0,0.31);-moz-box-shadow:1px 2px 5px rgba(0,0,0,0.31);border:solid 1px #cbc9c9;border-radius:8px/7px;display:grid;justify-items:center;align-items:center;grid-template-columns:15% 70% 15%;max-width:500px;width:80%;height:175px}audio-tool *{position:relative;display:block;margin:8px;padding:8px}audio-tool button{border-radius:50%;border:1px solid #000;cursor:pointer;width:45px;height:45px}audio-tool button:focus,audio-tool button:active{-webkit-box-shadow:inset 0px 0px 10px #c1c1c1;-moz-box-shadow:inset 0px 0px 10px #c1c1c1;box-shadow:inset 0px 0px 10px #c1c1c1;outline:none}audio-tool progress{cursor:pointer;display:block;width:auto;height:50px}audio-tool label{display:block;font-size:1em}audio-tool h1{font-size:1.5em}audio-tool style{display:none}audio-tool .play{background:url(../icons/play.png);background-repeat:no-repeat;background-position:center center}audio-tool .pause{background:url(../icons/pause.png);background-repeat:no-repeat;background-position:center center}audio-tool .restart{background:url(../icons/restart.png);background-repeat:no-repeat;background-position:center center}audio-tool .left-section{order:1;height:auto;width:auto}audio-tool .middle-section{order:2;height:auto;width:90%}audio-tool .right-section{order:3;height:auto;width:auto}")),document.getElementsByTagName("head")[0].appendChild(this.styles)}}},{key:"generateSections",value:function generateSections(){this.leftSection=document.createElement("div"),this.leftSection.className="left-section",this.appendChild(this.leftSection),this.middleSection=document.createElement("div"),this.middleSection.className="middle-section",this.appendChild(this.middleSection),this.rightSection=document.createElement("div"),this.rightSection.className="right-section",this.appendChild(this.rightSection)}},{key:"generateAudioElement",value:function generateAudioElement(){this.audioElement=document.createElement("audio"),this.audioElement.setAttribute("preload","metadata"),this.appendChild(this.audioElement)}},{key:"extractAttributesForAudioElement",value:function extractAttributesForAudioElement(){this.hasAttribute("src")&&(this.audioElement.src=this.getAttribute("src")),this.hasAttribute("preload")&&(this.audioElement.preload=this.getAttribute("preload")),this.hasAttribute("auto-play")&&"true"===this.getAttribute("auto-play")&&(this.audioElement.autoplay=!0,this.audioElement.load())}},{key:"generatePlayPauseButton",value:function generatePlayPauseButton(){var a=this;this.playPauseButton=document.createElement("button"),this.playPauseButton.className+="play",this.playPauseButton.setAttribute("aria-label","Play Button"),this.playing=!1,this.playPauseButton.addEventListener("click",function(){a.playing?(a.playPauseButton.className=a.playPauseButton.className.replace("pause","play"),a.playPauseButton.setAttribute("aria-label","Play Button"),a.audioElement.pause(),a.playing=!1):(a.playPauseButton.className=a.playPauseButton.className.replace("play","pause"),a.playPauseButton.setAttribute("aria-label","Pause Button"),a.audioElement.play(),a.playing=!0)}),this.leftSection.appendChild(this.playPauseButton)}},{key:"generateRestartButton",value:function generateRestartButton(){var a=this;this.restartButton=document.createElement("button"),this.restartButton.className="restart",this.restartButton.addEventListener("click",function(){a.audioElement.currentTime=0,a.playing||(a.playPauseButton.className=a.playPauseButton.className.replace("play","pause"),a.playPauseButton.setAttribute("aria-label","Pause Button"),a.audioElement.play(),a.playing=!0)}),this.rightSection.appendChild(this.restartButton)}},{key:"generateProgressBar",value:function generateProgressBar(){var a=this;this.progressBar=document.createElement("progress"),this.progressBar.value=0,this.progressBar.max=1,this.progressBar.addEventListener("click",function(b){// Update current time
var c=b.offsetX/a.progressBar.offsetWidth;a.audioElement.currentTime=c*a.audioElement.duration,a.progressBar.value=c}),this.middleSection.appendChild(this.progressBar)}},{key:"generateTimeStamp",value:function generateTimeStamp(){this.timeElement=document.createElement("label"),this.middleSection.appendChild(this.timeElement)}},{key:"generateTitle",value:function generateTitle(){this.titleElement=document.createElement("h1"),this.hasAttribute("title")?this.titleElement.textContent=this.getAttribute("title"):this.hasAttribute("src")&&(this.titleElement.textContent=this.getAttribute("src")),this.titleElement.setAttribute("aria-label","Song Title"),this.middleSection.appendChild(this.titleElement)}},{key:"setTime",value:function setTime(){var a=this;this.hasAttribute("src")&&(this.audioElement.onloadedmetadata=function(){a.timeElement.textContent=a.convertToMMSS(a.audioElement.currentTime)+" / "+a.convertToMMSS(a.audioElement.duration),a.audioElement.ontimeupdate=function(){a.progressBar.value=a.audioElement.currentTime/a.audioElement.duration,a.timeElement.textContent=a.convertToMMSS(a.audioElement.currentTime)+" / "+a.convertToMMSS(a.audioElement.duration),a.audioElement.currentTime===a.audioElement.duration&&(a.playing=!1,a.audioElement.currentTime=0,a.playPauseButton.className=a.playPauseButton.className.replace("pause","play"),a.playPauseButton.setAttribute("aria-label","Play Button"))}})}// https://stackoverflow.com/questions/6312993/javascript-seconds-to-time-string-with-format-hhmmss
},{key:"convertToMMSS",value:function convertToMMSS(a){var b=Math.floor,c=parseInt(a,10),d=b(c/3600),e=b((c-3600*d)/60),f=c-3600*d-60*e;e||(e="0"),10>f&&(f="0"+f);var g="";return 0<d&&(g+=d+":"),e&&(g+=e+":"),g+=f,g}}]),b}(_wrapNativeSuper(HTMLElement));customElements.define("audio-tool",audioTool);