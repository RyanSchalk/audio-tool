"use strict";function _typeof(a){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}function _possibleConstructorReturn(a,b){return b&&("object"===_typeof(b)||"function"==typeof b)?b:_assertThisInitialized(a)}function _assertThisInitialized(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&_setPrototypeOf(a,b)}function _wrapNativeSuper(a){var b="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function(a){function c(){return _construct(a,arguments,_getPrototypeOf(this).constructor)}if(null===a||!_isNativeFunction(a))return a;if("function"!=typeof a)throw new TypeError("Super expression must either be null or a function");if("undefined"!=typeof b){if(b.has(a))return b.get(a);b.set(a,c)}return c.prototype=Object.create(a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(c,a)},_wrapNativeSuper(a)}function isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(a){return!1}}function _construct(){return _construct=isNativeReflectConstruct()?Reflect.construct:function(b,c,d){var e=[null];e.push.apply(e,c);var a=Function.bind.apply(b,e),f=new a;return d&&_setPrototypeOf(f,d.prototype),f},_construct.apply(null,arguments)}function _isNativeFunction(a){return-1!==Function.toString.call(a).indexOf("[native code]")}function _setPrototypeOf(a,b){return _setPrototypeOf=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},_setPrototypeOf(a,b)}function _getPrototypeOf(a){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},_getPrototypeOf(a)}var audioTool=function(a){function b(){return _classCallCheck(this,b),_possibleConstructorReturn(this,_getPrototypeOf(b).call(this))}return _inherits(b,a),_createClass(b,[{key:"connectedCallback",value:function(){this.addStyles(),this.generateAudioElement(),this.generateSections(),this.generatePlayPauseButton(),this.generateTitle(),this.generateProgressBar(),this.generateTimeStamp(),this.generateRestartButton(),this.generateSvgs(),this.setTime()}},{key:"disconnectedCallback",value:function(){}},{key:"addStyles",value:function(){if(!this.hasAttribute("styles")||"true"!==this.getAttribute("styles")){this.styles=document.createElement("style"),this.styles.type="text/css";this.styles.styleSheet?this.styles.styleSheet.cssText="audio-tool{position:relative;display:block;margin:8px;padding:8px;box-shadow:1px 2px 5px rgba(0,0,0,0.31);-webkit-box-shadow:1px 2px 5px rgba(0,0,0,0.31);-moz-box-shadow:1px 2px 5px rgba(0,0,0,0.31);border:solid 1px #cbc9c9;border-radius:8px/7px;display:grid;justify-items:center;align-items:center;grid-template-columns:15% 70% 15%;max-width:500px;width:80%;height:200px}audio-tool *{position:relative;display:block;margin:8px;padding:8px}audio-tool audio{display:none}audio-tool button{background-color:transparent;border-radius:50%;border:1px solid #000;cursor:pointer;width:45px;height:45px;padding:0}audio-tool button:focus,audio-tool button:active{-webkit-box-shadow:inset 0px 0px 10px #c1c1c1;-moz-box-shadow:inset 0px 0px 10px #c1c1c1;box-shadow:inset 0px 0px 10px #c1c1c1;outline:none}audio-tool progress{cursor:pointer;display:block;width:95%;height:50px}audio-tool label{display:block;font-size:1em}audio-tool h1{font-size:1.25em}audio-tool style{display:none}audio-tool svg{margin:auto;padding:0}audio-tool .left-section{order:1;height:auto;width:auto}audio-tool .middle-section{order:2;height:auto;width:90%}audio-tool .right-section{order:3;height:auto;width:auto}@media screen and (min-width: 48em){audio-tool h1{font-size:1.5em}}":this.styles.appendChild(document.createTextNode("audio-tool{position:relative;display:block;margin:8px;padding:8px;box-shadow:1px 2px 5px rgba(0,0,0,0.31);-webkit-box-shadow:1px 2px 5px rgba(0,0,0,0.31);-moz-box-shadow:1px 2px 5px rgba(0,0,0,0.31);border:solid 1px #cbc9c9;border-radius:8px/7px;display:grid;justify-items:center;align-items:center;grid-template-columns:15% 70% 15%;max-width:500px;width:80%;height:200px}audio-tool *{position:relative;display:block;margin:8px;padding:8px}audio-tool audio{display:none}audio-tool button{background-color:transparent;border-radius:50%;border:1px solid #000;cursor:pointer;width:45px;height:45px;padding:0}audio-tool button:focus,audio-tool button:active{-webkit-box-shadow:inset 0px 0px 10px #c1c1c1;-moz-box-shadow:inset 0px 0px 10px #c1c1c1;box-shadow:inset 0px 0px 10px #c1c1c1;outline:none}audio-tool progress{cursor:pointer;display:block;width:95%;height:50px}audio-tool label{display:block;font-size:1em}audio-tool h1{font-size:1.25em}audio-tool style{display:none}audio-tool svg{margin:auto;padding:0}audio-tool .left-section{order:1;height:auto;width:auto}audio-tool .middle-section{order:2;height:auto;width:90%}audio-tool .right-section{order:3;height:auto;width:auto}@media screen and (min-width: 48em){audio-tool h1{font-size:1.5em}}")),document.getElementsByTagName("head")[0].appendChild(this.styles)}}},{key:"generateSections",value:function(){this.leftSection=document.createElement("div"),this.leftSection.className="left-section",this.appendChild(this.leftSection),this.middleSection=document.createElement("div"),this.middleSection.className="middle-section",this.appendChild(this.middleSection),this.rightSection=document.createElement("div"),this.rightSection.className="right-section",this.appendChild(this.rightSection)}},{key:"generateAudioElement",value:function(){this.audioElement=document.createElement("audio"),this.appendChild(this.audioElement),this.extractAttributesForAudioElement(),this.checkSong()}},{key:"extractAttributesForAudioElement",value:function(){this.hasAttribute("src")&&(this.audioElement.src=this.getAttribute("src")),this.hasAttribute("preload")&&(this.audioElement.preload=this.getAttribute("preload")),this.hasAttribute("auto-play")&&"true"===this.getAttribute("auto-play")&&(this.audioElement.autoplay=!0,this.audioElement.load())}},{key:"generateSvgs",value:function(){var a=35,b=35,c=25;this.playSvgElem=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.playSvgElem.setAttributeNS(null,"viewBox","0 0 "+c+" "+c),this.playSvgElem.setAttributeNS(null,"width",a),this.playSvgElem.setAttributeNS(null,"height",b);var d=document.createElementNS("http://www.w3.org/2000/svg","path");d.setAttributeNS(null,"d","M8 5v14l11-7z"),this.playSvgElem.appendChild(d),a=30,b=30,c=25,this.pauseSvgElem=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.pauseSvgElem.setAttributeNS(null,"viewBox","0 0 "+c+" "+c),this.pauseSvgElem.setAttributeNS(null,"width",a),this.pauseSvgElem.setAttributeNS(null,"height",b),this.pauseSvgElem.style.display="none",d=document.createElementNS("http://www.w3.org/2000/svg","path"),d.setAttributeNS(null,"d","M6 19h4V5H6v14zm8-14v14h4V5h-4z"),this.pauseSvgElem.appendChild(d),a=30,b=30,c=17;var e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttributeNS(null,"viewBox","0 0 "+c+" "+c),e.setAttributeNS(null,"width",a),e.setAttributeNS(null,"height",b),e.setAttributeNS(null,"class","restart"),d=document.createElementNS("http://www.w3.org/2000/svg","path"),d.setAttributeNS(null,"d","M9 13.5c-2.49 0-4.5-2.01-4.5-4.5S6.51 4.5 9 4.5c1.24 0 2.36.52 3.17 1.33L10 8h5V3l-1.76 1.76C12.15 3.68 10.66 3 9 3 5.69 3 3.01 5.69 3.01 9S5.69 15 9 15c2.97 0 5.43-2.16 5.9-5h-1.52c-.46 2-2.24 3.5-4.38 3.5z"),e.appendChild(d),this.playPauseButton.appendChild(this.playSvgElem),this.playPauseButton.appendChild(this.pauseSvgElem),this.restartButton.appendChild(e)}},{key:"generatePlayPauseButton",value:function(){var a=this;this.playPauseButton=document.createElement("button"),this.playPauseButton.setAttribute("aria-label","Play Audio"),this.playing=!1,this.playPauseButton.addEventListener("click",function(){a.playing?(a.pauseSvgElem.style.display="none",a.playSvgElem.style.display="block",a.playPauseButton.setAttribute("aria-label","Play Audio"),a.audioElement.pause(),a.playing=!1):(a.pauseSvgElem.style.display="block",a.playSvgElem.style.display="none",a.playPauseButton.setAttribute("aria-label","Pause Audio"),a.audioElement.play(),a.playing=!0)}),this.leftSection.appendChild(this.playPauseButton)}},{key:"generateRestartButton",value:function(){var a=this;this.restartButton=document.createElement("button"),this.restartButton.className="restart",this.restartButton.addEventListener("click",function(){a.audioElement.currentTime=0,a.playing||(a.pauseSvgElem.style.display="block",a.playSvgElem.style.display="none",a.playPauseButton.setAttribute("aria-label","Pause Audio"),a.audioElement.play(),a.playing=!0)}),this.rightSection.appendChild(this.restartButton)}},{key:"generateProgressBar",value:function(){var a=this;this.progressBar=document.createElement("progress"),this.progressBar.value=0,this.progressBar.max=1,this.progressBar.addEventListener("click",function(b){var c=b.offsetX/a.progressBar.offsetWidth;a.audioElement.currentTime=c*a.audioElement.duration,a.progressBar.value=c}),this.middleSection.appendChild(this.progressBar)}},{key:"generateTimeStamp",value:function(){this.timeElement=document.createElement("label"),this.middleSection.appendChild(this.timeElement)}},{key:"generateTitle",value:function(){this.titleElement=document.createElement("h1"),this.hasAttribute("title")?this.titleElement.textContent=this.getAttribute("title"):this.hasAttribute("src")&&(this.titleElement.textContent=this.getAttribute("src")),this.titleElement.setAttribute("aria-label","Song Title"),this.middleSection.appendChild(this.titleElement)}},{key:"setTime",value:function(){var a=this;this.hasAttribute("src")&&(this.audioElement.onloadedmetadata=function(){a.timeElement.textContent=a.convertToMMSS(a.audioElement.currentTime)+" / "+a.convertToMMSS(a.audioElement.duration),a.audioElement.ontimeupdate=function(){a.progressBar.value=a.audioElement.currentTime/a.audioElement.duration,a.timeElement.textContent=a.convertToMMSS(a.audioElement.currentTime)+" / "+a.convertToMMSS(a.audioElement.duration),a.audioElement.currentTime===a.audioElement.duration&&(a.playing=!1,a.audioElement.currentTime=0,a.pauseSvgElem.style.display="none",a.playSvgElem.style.display="block",a.playPauseButton.setAttribute("aria-label","Play Audio"))}})}},{key:"checkSong",value:function(){if(this.audioElement.src){var a=this.audioElement.src,b=a.substring(a.lastIndexOf(".")+1);"mp3"===b?!!(this.audioElement.canPlayType&&this.audioElement.canPlayType("audio/mpeg;").replace(/no/,""))||(this.titleElement.textContent="This browser doesn't support MP3 Format audio file"):"m4a"===b?!!(this.audioElement.canPlayType&&this.audioElement.canPlayType("audio/mp4; codecs=\"mp4a.40.2\"").replace(/no/,""))||(this.titleElement.textContent="This browser doesn't support AAC Format audio file"):"aac"===b?!!(this.audioElement.canPlayType&&this.audioElement.canPlayType("audio/mp4; codecs=\"mp4a.40.2\"").replace(/no/,""))||(this.titleElement.textContent="This browser doesn't support AAC Format audio file"):"wav"===b?!!(this.audioElement.canPlayType&&this.audioElement.canPlayType("audio/wav; codecs=\"1\"").replace(/no/,""))||(this.titleElement.textContent="This browser doesn't support WAV Format audio file"):"ogg"===b?!!(this.audioElement.canPlayType&&this.audioElement.canPlayType("audio/ogg; codecs=\"vorbis\"").replace(/no/,""))||(this.titleElement.textContent="This browser doesn't support Vorbis Format audio file"):!!this.audioElement.canPlayType("audio/"+b)||(this.titleElement.textContent="This browser doesn't support this audio file")}}},{key:"convertToMMSS",value:function(a){var b=Math.floor,c=parseInt(a,10),d=b(c/3600),e=b((c-3600*d)/60),f=c-3600*d-60*e;e||(e="0"),10>f&&(f="0"+f);var g="";return 0<d&&(g+=d+":"),e&&(g+=e+":"),g+=f,g}}]),b}(_wrapNativeSuper(HTMLElement));customElements.define("audio-tool",audioTool);
